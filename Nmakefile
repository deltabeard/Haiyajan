# Simple makefile for Microsoft NMAKE only
# Example usage:
#   nmake /NOLOGO /B /f .\Nmakefile SDL_LIB=C:\Users\foo\Downloads\SDL2-devel-2.0.12-VC\SDL2\lib\x64 SDL_INC=C:\Users\foo\Downloads\SDL2-devel-2.0.12-VC\SDL2
# Where SDL_LIB is the location of SDL2.lib, and SDL_INC is a folder containing a subfolder also named "SDL2" which contains header files such as "SDL.h".

#SDL_INC	=
#SDL_LIB	=

!IFNDEF SDL_INC
!ERROR "SDL2 include folder must be set in SDL_INC"
!ENDIF

!IFNDEF SDL_LIB
!ERROR "SDL2 library folder must be set in SDL_LIB"
!ENDIF

VERSION_MAJOR = 0
VERSION_MINOR = 1

DEBUG		= 0

!IF "$(DEBUG)" != "0"
WARN	= 4
OPT		= /Zi /Od /GS
!ELSE
WARN	= 2
OPT		= /Gw /GL /O2 /GS-
!ENDIF

CC	= cl /nologo
CFLAGS	= /W$(WARN) $(OPT) /fp:fast /MT /I inc /I $(SDL_INC) /Drestrict=
LDLIBS	= $(SDL_LIB)\SDL2.lib $(SDL_LIB)\SDL2main.lib shell32.lib /link /VERSION:$(VERSION_MAJOR).$(VERSION_MINOR) /SUBSYSTEM:CONSOLE
# /NODEFAULTLIB:msvcrtd.lib 

all: haiyajan.exe

haiyajan.exe: src\haiyajan.obj src\load.obj src\play.obj src\timer.obj \
		src\font.obj src\input.obj src\gl.obj src\rec.obj src\util.obj \
		src\tinflate.obj
	$(CC) $(CFLAGS) $(**F) $(LDLIBS)

clean:
	del *.obj haiyajan.exe